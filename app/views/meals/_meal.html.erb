<% @week.each do |date| %>
  <h1> 
  	<%# cycle thru weekdays looking for today and yesterday for the sake of the label%>
  	<% if date.strftime('%Y-%m-%d') == @today %> Today
  	<% elsif date.strftime('%Y-%m-%d') == @yesterday %> Yesterday
  	<% else%> <%=date.strftime('%D')%> 
  	<% end %>
  	-- <%= hidden_field_tag @total_cal = total_calories(date - 1.day, date) %> <%= @total_cal %> calories -- <%= how_much_left(@total_cal, @current_goal.daily_calories) %> <%= link_to "+", new_meal_path(value: date.strftime('%Y-%m-%d'))%> 
  </h1>
  <%# cycle thru meal times (breakfast, lunch, dinner) for the sake of labeling and organizing the daily calories %>
    <% @meal_times.each do |time| %>
	  	<h2> <%= time.capitalize %> </h2>
	  	<%# hidden field @count calculated with meals_helper function. @sum_calories calculated in function %>
		  	<h3> <%= hidden_field_tag @count = sum_meal_types("meal", date, time) %>
		  	 		<% if @count > 0 %> 
		  	 		<%= link_to image_tag("meal_free.png", size: "50x50"), new_meal_path(value: date.strftime('%Y-%m-%d'), meal: time, type: "meal") %> <%= " = #{@sum_calories}" %>
		  	 		<% else %>
		  	 		<%= link_to image_tag("meal_free.png", size: "50x50"), new_meal_path(value: date.strftime('%Y-%m-%d'), meal: time, type: "meal") %>
		  	 		<% end %>
		  	<%# go thru meal type "meals" to show meal calores, then do "drinks", lastly "snacks" %> 		
				<% @meals_meals.each do |meal| %>
					<% if meal.day_of_meal.strftime('%Y-%m-%d') == date.strftime('%Y-%m-%d') && meal.meal_time == time %>
					  <%= link_to meal.meal_type.capitalize, meal %> <%= meal.calories %> 
					  <%= link_to "Edit", edit_meal_path(meal) %> <%= link_to "Delete", meal, method: :delete %><br>			  
					<% end %>
				<% end %>
				<%= hidden_field_tag @count = sum_meal_types("drink", date, time) %>
		  	 		<% if @count > 0 %> 
		  	 		<%= link_to image_tag("drink_free.png", size: "50x50"), new_meal_path(value: date.strftime('%Y-%m-%d'), meal: time, type: "drink") %> <%= " = #{@sum_calories}" %>
		  	 		<% else %>
		  	 		<%= link_to image_tag("drink_free.png", size: "50x50"), new_meal_path(value: date.strftime('%Y-%m-%d'), meal: time, type: "drink") %>
		  	 		<% end %>
				<% @meals_drinks.each do |meal| %>
					<% if meal.day_of_meal.strftime('%Y-%m-%d') == date.strftime('%Y-%m-%d') && meal.meal_time == time %>
					  <%= link_to meal.meal_type.capitalize, meal %> <%= meal.calories %> 
					  <%= link_to "Edit", edit_meal_path(meal) %> <%= link_to "Delete", meal, method: :delete %><br>			  
					<% end %>
				<% end %>
				<%= hidden_field_tag @count = sum_meal_types("snack", date, time) %>
		  	 		<% if @count > 0 %> 
		  	 		<%= link_to image_tag("apple_free.png", size: "50x50"), new_meal_path(value: date.strftime('%Y-%m-%d'), meal: time, type: "snack") %> <%= " = #{@sum_calories}" %>
		  	 		<% else %>
		  	 		<%= link_to image_tag("apple_free.png", size: "50x50"), new_meal_path(value: date.strftime('%Y-%m-%d'), meal: time, type: "snack") %>
		  	 		<% end %>
		  	</h3>
			<% @meals_snacks.each do |meal| %>
				<% if meal.day_of_meal.strftime('%Y-%m-%d') == date.strftime('%Y-%m-%d') && meal.meal_time == time %>
				  <%= link_to meal.meal_type.capitalize, meal %> <%= meal.calories %> 
				  <%= link_to "Edit", edit_meal_path(meal) %> <%= link_to "Delete", meal, method: :delete %><br>			  
				<% end %>
			<% end %>
		<% end %>
<% end %>


<!--make links auto ad the date that is next to the link -->
<!--make partial of repeated code and call partial -->